<div style="max-width:520px;margin:0 auto;padding:16px;font-family:system-ui;">

  <div style="display:flex;justify-content:space-between;align-items:center;">
    <h2 style="margin:0;">FoodFresh</h2>
    <button type="button" (click)="clear()"
      style="padding:8px 12px;border:1px solid #ddd;border-radius:8px;cursor:pointer;">
      Clear all
    </button>
  </div>

  <form [formGroup]="form" (ngSubmit)="editingId ? update() : add()"
    style="display:grid;gap:10px;margin-top:12px;padding:12px;border:1px solid #ddd;border-radius:10px;">

    <div style="display:grid;gap:6px;">
      <label>Food name</label>
      <input formControlName="name" placeholder="e.g., Milk"
        style="padding:10px;border:1px solid #ccc;border-radius:8px;" />
      <small *ngIf="form.controls.name.touched && form.controls.name.invalid" style="color:#b00020;">
        Name is required (min 2 characters).
      </small>
    </div>

    <div style="display:grid;gap:6px;">
      <label>Expiration date</label>
      <input type="date" formControlName="expirationDate"
        style="padding:10px;border:1px solid #ccc;border-radius:8px;" />
      <small *ngIf="form.controls.expirationDate.touched && form.controls.expirationDate.invalid"
        style="color:#b00020;">
        Expiration date is required.
      </small>
    </div>

    <div style="display:grid;gap:6px;">
      <label>Storage location</label>
      <select formControlName="storageLocation" style="padding:10px;border:1px solid #ccc;border-radius:8px;">
        <option value="fridge">Fridge</option>
        <option value="freezer">Freezer</option>
        <option value="pantry">Pantry</option>
      </select>
    </div>

    <div style="display:grid;gap:6px;">
      <label>Price ($)</label>
      <input type="number" formControlName="price" placeholder="0.00" step="0.01"
        style="padding:10px;border:1px solid #ccc;border-radius:8px;" />
      <small *ngIf="form.controls.price.touched && form.controls.price.invalid" style="color:#b00020;">
        Valid price is required (min 0).
      </small>
    </div>

    <button type="submit" style="padding:10px;border:none;border-radius:8px;cursor:pointer;">
      {{ editingId ? 'Update item' : 'Add item' }}
    </button>

    <button *ngIf="editingId" type="button" (click)="editingId = null; form.reset({storageLocation: 'fridge'})"
      style="background:none; border:none; color:#666; cursor:pointer; font-size:12px;">
      Cancel Edit
    </button>

  </form>

  <h3 style="margin:16px 0 8px;">Your items (soonest first)</h3>

  <div *ngIf="items().length === 0" style="color:#666;">
    No items yet.
  </div>

  <div *ngFor="let item of items()" style="display:flex;justify-content:space-between;align-items:center;
              padding:10px 12px;border:1px solid #eee;border-radius:10px;margin-bottom:8px;">

    <div>
      <div style="font-weight:600;">{{ item.name }}</div>
      <div style="font-size:13px;color:#666;">
        Expires: {{ item.expirationDate }} â€¢ {{ item.storageLocation }}
      </div>
    </div>

    <div style="display:flex;align-items:center;gap:10px;">
      <span style="font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid #ccc;">
        {{ status(item) }}
      </span>
      <!--edit button-->
      <button type="button" (click)="edit(item)"
        style="padding:8px 10px;border:1px solid #ddd;border-radius:8px;cursor:pointer;">
        Edit
      </button>

      <button type="button" (click)="waste(item)"
        style="padding:8px 10px;border:1px solid #ddd;border-radius:8px;cursor:pointer;background:#fcfcfc;">
        Waste
      </button>

      <button type="button" (click)="delete(item.id)"
        style="padding:8px 10px;border:1px solid #ddd;border-radius:8px;cursor:pointer;">
        Delete
      </button>
    </div>
  </div>
  <div *ngIf="wastedItems.length > 0"
    style="display:grid; gap:10px; margin-top:24px; padding:12px; border:1px solid #ddd; border-radius:10px; background-color:#fff;">

    <div
      style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #eee; padding-bottom:8px;">
      <h3 style="margin:0; font-size:24px;">Waste Summary</h3>
      <button type="button" (click)="clearWaste()"
        style="padding:6px 10px; border:1px solid #ddd; border-radius:8px; cursor:pointer; background:white; font-size:12px;">
        Clear Waste Bucket
      </button>
    </div>

    <div style="display:grid; gap:4px;">
      <div *ngFor="let w of wastedItems"
        style="display:flex; justify-content:space-between; padding:6px 0; border-bottom:1px solid #f9f9f9; font-size:14px;">
        <span>{{ w.name }}</span>
        <span style="color:#666;">{{ w.price | currency }}</span>
      </div>
    </div>

    <div style="display:flex; justify-content:space-between; align-items:center; padding-top:8px; margin-top:4px;">
      <span style="font-weight:bold;">Total Money Lost</span>
      <span style="font-size:15px; font-weight:bold; color:#b00020;">
        {{ totalWasteCost | currency }}
      </span>
    </div>
  </div>
</div>